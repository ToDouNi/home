System.register(["./three.module-legacy-77891c67.js"],(function(e,t){"use strict";var n,o,a,i,r,c,s,l,m,p;return{setters:[e=>{n=e.ak,o=e.al,a=e.am,i=e.V,r=e.an,c=e.ao,s=e.a0,l=e.ap,m=e.p,p=e.U}],execute:function(){const t={type:"change"},u={type:"start"},h={type:"end"},d=new n,b=new o,g=Math.cos(70*p.DEG2RAD);e("O",class extends a{constructor(e,n){super(),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new i,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:r.ROTATE,MIDDLE:r.DOLLY,RIGHT:r.PAN},this.touches={ONE:c.ROTATE,TWO:c.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return E.phi},this.getAzimuthalAngle=function(){return E.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",ae),this._domElementKeyEvents=e},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ae),this._domElementKeyEvents=null},this.saveState=function(){o.target0.copy(o.target),o.position0.copy(o.object.position),o.zoom0=o.object.zoom},this.reset=function(){o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),o.dispatchEvent(t),o.update(),p=a.NONE},this.update=function(){const n=new i,r=(new s).setFromUnitVectors(e.up,new i(0,1,0)),c=r.clone().invert(),l=new i,m=new s,u=new i,h=2*Math.PI;return function(s=null){const j=o.object.position;n.copy(j).sub(o.target),n.applyQuaternion(r),E.setFromVector3(n),o.autoRotate&&p===a.NONE&&D(function(e){return null!==e?2*Math.PI/60*o.autoRotateSpeed*e:2*Math.PI/60/60*o.autoRotateSpeed}(s)),o.enableDamping?(E.theta+=y.theta*o.dampingFactor,E.phi+=y.phi*o.dampingFactor):(E.theta+=y.theta,E.phi+=y.phi);let T=o.minAzimuthAngle,v=o.maxAzimuthAngle;isFinite(T)&&isFinite(v)&&(T<-Math.PI?T+=h:T>Math.PI&&(T-=h),v<-Math.PI?v+=h:v>Math.PI&&(v-=h),E.theta=T<=v?Math.max(T,Math.min(v,E.theta)):E.theta>(T+v)/2?Math.max(T,E.theta):Math.min(v,E.theta)),E.phi=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,E.phi)),E.makeSafe(),!0===o.enableDamping?o.target.addScaledVector(P,o.dampingFactor):o.target.add(P),o.zoomToCursor&&S||o.object.isOrthographicCamera?E.radius=U(E.radius):E.radius=U(E.radius*O),n.setFromSpherical(E),n.applyQuaternion(c),j.copy(o.target).add(n),o.object.lookAt(o.target),!0===o.enableDamping?(y.theta*=1-o.dampingFactor,y.phi*=1-o.dampingFactor,P.multiplyScalar(1-o.dampingFactor)):(y.set(0,0,0),P.set(0,0,0));let w=!1;if(o.zoomToCursor&&S){let t=null;if(o.object.isPerspectiveCamera){const e=n.length();t=U(e*O);const a=e-t;o.object.position.addScaledVector(k,a),o.object.updateMatrixWorld()}else if(o.object.isOrthographicCamera){const e=new i(R.x,R.y,0);e.unproject(o.object),o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/O)),o.object.updateProjectionMatrix(),w=!0;const a=new i(R.x,R.y,0);a.unproject(o.object),o.object.position.sub(a).add(e),o.object.updateMatrixWorld(),t=n.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),o.zoomToCursor=!1;null!==t&&(this.screenSpacePanning?o.target.set(0,0,-1).transformDirection(o.object.matrix).multiplyScalar(t).add(o.object.position):(d.origin.copy(o.object.position),d.direction.set(0,0,-1).transformDirection(o.object.matrix),Math.abs(o.object.up.dot(d.direction))<g?e.lookAt(o.target):(b.setFromNormalAndCoplanarPoint(o.object.up,o.target),d.intersectPlane(b,o.target))))}else o.object.isOrthographicCamera&&(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/O)),o.object.updateProjectionMatrix(),w=!0);return O=1,S=!1,!!(w||l.distanceToSquared(o.object.position)>f||8*(1-m.dot(o.object.quaternion))>f||u.distanceToSquared(o.target)>0)&&(o.dispatchEvent(t),l.copy(o.object.position),m.copy(o.object.quaternion),u.copy(o.target),w=!1,!0)}}(),this.dispose=function(){o.domElement.removeEventListener("contextmenu",ie),o.domElement.removeEventListener("pointerdown",ee),o.domElement.removeEventListener("pointercancel",ne),o.domElement.removeEventListener("wheel",oe),o.domElement.removeEventListener("pointermove",te),o.domElement.removeEventListener("pointerup",ne),null!==o._domElementKeyEvents&&(o._domElementKeyEvents.removeEventListener("keydown",ae),o._domElementKeyEvents=null)};const o=this,a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let p=a.NONE;const f=1e-6,E=new l,y=new l;let O=1;const P=new i,j=new m,T=new m,v=new m,w=new m,A=new m,L=new m,N=new m,M=new m,x=new m,k=new i,R=new m;let S=!1;const C=[],I={};function Y(){return Math.pow(.95,o.zoomSpeed)}function D(e){y.theta-=e}function z(e){y.phi-=e}const _=function(){const e=new i;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),P.add(e)}}(),H=function(){const e=new i;return function(t,n){!0===o.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(o.object.up,e)),e.multiplyScalar(t),P.add(e)}}(),K=function(){const e=new i;return function(t,n){const a=o.domElement;if(o.object.isPerspectiveCamera){const i=o.object.position;e.copy(i).sub(o.target);let r=e.length();r*=Math.tan(o.object.fov/2*Math.PI/180),_(2*t*r/a.clientHeight,o.object.matrix),H(2*n*r/a.clientHeight,o.object.matrix)}else o.object.isOrthographicCamera?(_(t*(o.object.right-o.object.left)/o.object.zoom/a.clientWidth,o.object.matrix),H(n*(o.object.top-o.object.bottom)/o.object.zoom/a.clientHeight,o.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),o.enablePan=!1)}}();function X(e){o.object.isPerspectiveCamera||o.object.isOrthographicCamera?O/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function F(e){o.object.isPerspectiveCamera||o.object.isOrthographicCamera?O*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function Z(e){if(!o.zoomToCursor)return;S=!0;const t=o.domElement.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top,i=t.width,r=t.height;R.x=n/i*2-1,R.y=-a/r*2+1,k.set(R.x,R.y,1).unproject(o.object).sub(o.object.position).normalize()}function U(e){return Math.max(o.minDistance,Math.min(o.maxDistance,e))}function V(e){j.set(e.clientX,e.clientY)}function G(e){w.set(e.clientX,e.clientY)}function W(){if(1===C.length)j.set(C[0].pageX,C[0].pageY);else{const e=.5*(C[0].pageX+C[1].pageX),t=.5*(C[0].pageY+C[1].pageY);j.set(e,t)}}function B(){if(1===C.length)w.set(C[0].pageX,C[0].pageY);else{const e=.5*(C[0].pageX+C[1].pageX),t=.5*(C[0].pageY+C[1].pageY);w.set(e,t)}}function q(){const e=C[0].pageX-C[1].pageX,t=C[0].pageY-C[1].pageY,n=Math.sqrt(e*e+t*t);N.set(0,n)}function Q(e){if(1==C.length)T.set(e.pageX,e.pageY);else{const t=ce(e),n=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);T.set(n,o)}v.subVectors(T,j).multiplyScalar(o.rotateSpeed);const t=o.domElement;D(2*Math.PI*v.x/t.clientHeight),z(2*Math.PI*v.y/t.clientHeight),j.copy(T)}function J(e){if(1===C.length)A.set(e.pageX,e.pageY);else{const t=ce(e),n=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);A.set(n,o)}L.subVectors(A,w).multiplyScalar(o.panSpeed),K(L.x,L.y),w.copy(A)}function $(e){const t=ce(e),n=e.pageX-t.x,a=e.pageY-t.y,i=Math.sqrt(n*n+a*a);M.set(0,i),x.set(0,Math.pow(M.y/N.y,o.zoomSpeed)),X(x.y),N.copy(M)}function ee(e){!1!==o.enabled&&(0===C.length&&(o.domElement.setPointerCapture(e.pointerId),o.domElement.addEventListener("pointermove",te),o.domElement.addEventListener("pointerup",ne)),function(e){C.push(e)}(e),"touch"===e.pointerType?function(e){switch(re(e),C.length){case 1:switch(o.touches.ONE){case c.ROTATE:if(!1===o.enableRotate)return;W(),p=a.TOUCH_ROTATE;break;case c.PAN:if(!1===o.enablePan)return;B(),p=a.TOUCH_PAN;break;default:p=a.NONE}break;case 2:switch(o.touches.TWO){case c.DOLLY_PAN:if(!1===o.enableZoom&&!1===o.enablePan)return;o.enableZoom&&q(),o.enablePan&&B(),p=a.TOUCH_DOLLY_PAN;break;case c.DOLLY_ROTATE:if(!1===o.enableZoom&&!1===o.enableRotate)return;o.enableZoom&&q(),o.enableRotate&&W(),p=a.TOUCH_DOLLY_ROTATE;break;default:p=a.NONE}break;default:p=a.NONE}p!==a.NONE&&o.dispatchEvent(u)}(e):function(e){let t;switch(e.button){case 0:t=o.mouseButtons.LEFT;break;case 1:t=o.mouseButtons.MIDDLE;break;case 2:t=o.mouseButtons.RIGHT;break;default:t=-1}switch(t){case r.DOLLY:if(!1===o.enableZoom)return;!function(e){Z(e),N.set(e.clientX,e.clientY)}(e),p=a.DOLLY;break;case r.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===o.enablePan)return;G(e),p=a.PAN}else{if(!1===o.enableRotate)return;V(e),p=a.ROTATE}break;case r.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===o.enableRotate)return;V(e),p=a.ROTATE}else{if(!1===o.enablePan)return;G(e),p=a.PAN}break;default:p=a.NONE}p!==a.NONE&&o.dispatchEvent(u)}(e))}function te(e){!1!==o.enabled&&("touch"===e.pointerType?function(e){switch(re(e),p){case a.TOUCH_ROTATE:if(!1===o.enableRotate)return;Q(e),o.update();break;case a.TOUCH_PAN:if(!1===o.enablePan)return;J(e),o.update();break;case a.TOUCH_DOLLY_PAN:if(!1===o.enableZoom&&!1===o.enablePan)return;!function(e){o.enableZoom&&$(e),o.enablePan&&J(e)}(e),o.update();break;case a.TOUCH_DOLLY_ROTATE:if(!1===o.enableZoom&&!1===o.enableRotate)return;!function(e){o.enableZoom&&$(e),o.enableRotate&&Q(e)}(e),o.update();break;default:p=a.NONE}}(e):function(e){switch(p){case a.ROTATE:if(!1===o.enableRotate)return;!function(e){T.set(e.clientX,e.clientY),v.subVectors(T,j).multiplyScalar(o.rotateSpeed);const t=o.domElement;D(2*Math.PI*v.x/t.clientHeight),z(2*Math.PI*v.y/t.clientHeight),j.copy(T),o.update()}(e);break;case a.DOLLY:if(!1===o.enableZoom)return;!function(e){M.set(e.clientX,e.clientY),x.subVectors(M,N),x.y>0?X(Y()):x.y<0&&F(Y()),N.copy(M),o.update()}(e);break;case a.PAN:if(!1===o.enablePan)return;!function(e){A.set(e.clientX,e.clientY),L.subVectors(A,w).multiplyScalar(o.panSpeed),K(L.x,L.y),w.copy(A),o.update()}(e)}}(e))}function ne(e){!function(e){delete I[e.pointerId];for(let t=0;t<C.length;t++)if(C[t].pointerId==e.pointerId)return void C.splice(t,1)}(e),0===C.length&&(o.domElement.releasePointerCapture(e.pointerId),o.domElement.removeEventListener("pointermove",te),o.domElement.removeEventListener("pointerup",ne)),o.dispatchEvent(h),p=a.NONE}function oe(e){!1!==o.enabled&&!1!==o.enableZoom&&p===a.NONE&&(e.preventDefault(),o.dispatchEvent(u),function(e){Z(e),e.deltaY<0?F(Y()):e.deltaY>0&&X(Y()),o.update()}(e),o.dispatchEvent(h))}function ae(e){!1!==o.enabled&&!1!==o.enablePan&&function(e){let t=!1;switch(e.code){case o.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?z(2*Math.PI*o.rotateSpeed/o.domElement.clientHeight):K(0,o.keyPanSpeed),t=!0;break;case o.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?z(-2*Math.PI*o.rotateSpeed/o.domElement.clientHeight):K(0,-o.keyPanSpeed),t=!0;break;case o.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?D(2*Math.PI*o.rotateSpeed/o.domElement.clientHeight):K(o.keyPanSpeed,0),t=!0;break;case o.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?D(-2*Math.PI*o.rotateSpeed/o.domElement.clientHeight):K(-o.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),o.update())}(e)}function ie(e){!1!==o.enabled&&e.preventDefault()}function re(e){let t=I[e.pointerId];void 0===t&&(t=new m,I[e.pointerId]=t),t.set(e.pageX,e.pageY)}function ce(e){const t=e.pointerId===C[0].pointerId?C[1]:C[0];return I[t.pointerId]}o.domElement.addEventListener("contextmenu",ie),o.domElement.addEventListener("pointerdown",ee),o.domElement.addEventListener("pointercancel",ne),o.domElement.addEventListener("wheel",oe,{passive:!1}),this.update()}})}}}));
